(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{119:function(e,t){},134:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(59),o=n.n(r),s=(n(33),n(8)),l=n(60),i=n.n(l),m=n(61),u=n.n(m),f=n(62),d=n.n(f),b=u()("localhost:4000"),v=function(e){var t=e.location,n=Object(a.useRef)(null),r=Object(a.useRef)(null),o=Object(a.useState)(""),l=Object(s.a)(o,2),m=l[0],u=l[1],f=Object(a.useState)(""),v=Object(s.a)(f,2),p=v[0],E=v[1],g=Object(a.useState)([]),h=Object(s.a)(g,2),j=h[0],O=h[1],N=Object(a.useState)(""),y=Object(s.a)(N,2),S=y[0],w=y[1],x=Object(a.useState)(""),k=Object(s.a)(x,2),A=k[0],C=k[1];return Object(a.useEffect)((function(){var e=d.a.parse(t.search).name;E(e),console.log(e),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(t){console.log(e),b.emit("NewClient",e),n.current.srcObject=t,n.current.play(),console.log(n.current);var a={};function c(e){console.log("peer received");var n=new i.a({initiator:"init"===e,stream:t,trickle:!1});return console.log("peer",n),n.on("stream",(function(e){console.log("stream",e),r.current&&(r.current.srcObject=e,r.current.play())})),n.on("close",(function(){r.current.remove(),n.destroy(),console.log("peer destroyed")})),n}b.on("CreatePeer",(function(){a.gotAnswer=!1;var e=c("init");e.on("signal",(function(e){a.gotAnswer||b.emit("offer",e)})),a.peer=e})),b.on("backOffer",(function(e){var t=c("notInit");t.on("signal",(function(e){b.emit("Answer",e)})),t.signal(e),a.peer=t})),b.on("backAnswer",(function(e){a.gotAnswer=!0,a.peer.signal(e)})),b.on("SessionActive",(function(){u("Session is active , Please comeback later"),n.current.remove()}))})).catch((function(e){return console.log(e)}))}),[t.search]),b.on("sending names peer",(function(e){O(e)})),Object(a.useEffect)((function(){j&&j.map((function(e,t){e===p?w(e):C(e)}))}),[j,p]),c.a.createElement("div",null,c.a.createElement("h4",{className:"heading"}," Welcome to video chat"),c.a.createElement("p",{className:"heading"},m),c.a.createElement("div",{className:"col-12 col-sm-6 d-flex justify-content-center "},c.a.createElement("h5",{className:"adminName"},S),c.a.createElement("div",{className:"embed-responsive embed-responsive-16by9 videoAdmin"},c.a.createElement("video",{ref:n,className:"embed-responsive-item",muted:!0}))),c.a.createElement("div",{className:"col-12 col-sm-6 d-flex justify-content-center "},c.a.createElement("h5",{className:"peerName"},A),c.a.createElement("div",{className:"embed-responsive embed-responsive-16by9 videoPeer"},c.a.createElement("video",{ref:r,className:'"embed-responsive-item"'}))))},p=n(19),E=n(29),g=n(1),h=Object(g.f)((function(e){var t=e.history,n=Object(a.useState)({name:""}),r=Object(s.a)(n,2),o=r[0],l=r[1],i=Object(a.useState)([]),m=Object(s.a)(i,2),u=m[0],f=m[1],d=o.name,b=u.length>0?u.map((function(e,t){return c.a.createElement("div",{key:t},e)})):"";return c.a.createElement("div",{className:"container mt-4"},c.a.createElement("div",{className:"col-md-6 m-auto"},c.a.createElement("div",{className:"card  card-body card-color"},c.a.createElement("h4",{className:" text-center  mt-2"}," Video Chat "),c.a.createElement("h6",{className:"text-center mt-2 text-danger"}," ",b),c.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault();var n=[];d||n.push("Name cannot be empty"),n.length>0?(f(n),setTimeout((function(){f([])}),3e3)):t.push("/videochat?name=".concat(d))}(e)}},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-dark"},"Enter your Name: "),c.a.createElement("input",{className:"form-control",type:"text",name:"name",value:d,onChange:function(e){return function(e){e.preventDefault(),l(Object(E.a)(Object(E.a)({},o),{},Object(p.a)({},e.target.name,e.target.value)))}(e)}})),c.a.createElement("button",{className:"btn btn-secondary form-control",type:"submit"},"submit")))))})),j=n(28);var O=function(){return c.a.createElement(j.a,null,c.a.createElement(g.c,null,c.a.createElement(g.a,{exact:!0,path:"/",component:h})),c.a.createElement(g.c,null,c.a.createElement(g.a,{path:"/videochat",component:v})))};o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(O,null)),document.getElementById("root"))},33:function(e,t,n){},64:function(e,t,n){e.exports=n(134)},90:function(e,t){},92:function(e,t){}},[[64,1,2]]]);
//# sourceMappingURL=main.2301502e.chunk.js.map